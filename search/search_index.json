{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Fontus Discover your water quality data! Fontus is an intuitive, easy-to-use open-source web application that allows you to apply various numerical and graphical analysis techniques to your data. Upload your water quality data with a simple drag and drop and start analyzing your data. The built in demo dataset is equipped with all features and serves as an excellent starting point for familiarizing yourself with Fontus before uploading your own data. Many calculations within Fontus are performed by the geochemical modeling software PHREEQC . PHREEQC is developed by the US Geological Survey (USGS) and is designed to perform a wide variety of aqueous geochemical calculations, including speciation, batch-reaction, one-dimensional reactive-transport, and inverse geochemical calculations. Gettings started Fontus consists of four modules. Each of the modules has several options depending on the uploaded data. Below the complete list of menu items is discussed; depending on your data, not all options may appear. For example, the field's longitude and latitude must be present for the map to become available. The demo dataset is set up to include all features and is an excellent place to start getting used to Fontus before loading your data. Data : this allows you to upload your data and map your fields to variables used by the system. The build in dataset includes groundwater water chemistry monitoring data from Basel/Switzerland. The original dataset is published on the Open Data Portal of Basel. Plots : Allows to plot various plots commonly used to study water quality data. In the current version, Piper plots and maps are supported. Analyses : Allows to apply of various numerical analyses commonly used in the study of water quality data. In the current version, the Mann-Kendall test is supported. Calculators : Offers a set of calculators to perform standard calculations in water chemistry data. The current version supports formula weight conversion, sodium adsorption ratio calculation for irrigation water, formula weight calculations for minerals and the mineral Saturation Index claculation using PHREEQC.","title":"Home"},{"location":"#fontus","text":"","title":"Fontus"},{"location":"#discover-your-water-quality-data","text":"Fontus is an intuitive, easy-to-use open-source web application that allows you to apply various numerical and graphical analysis techniques to your data. Upload your water quality data with a simple drag and drop and start analyzing your data. The built in demo dataset is equipped with all features and serves as an excellent starting point for familiarizing yourself with Fontus before uploading your own data. Many calculations within Fontus are performed by the geochemical modeling software PHREEQC . PHREEQC is developed by the US Geological Survey (USGS) and is designed to perform a wide variety of aqueous geochemical calculations, including speciation, batch-reaction, one-dimensional reactive-transport, and inverse geochemical calculations.","title":"Discover your water quality data!"},{"location":"#gettings-started","text":"Fontus consists of four modules. Each of the modules has several options depending on the uploaded data. Below the complete list of menu items is discussed; depending on your data, not all options may appear. For example, the field's longitude and latitude must be present for the map to become available. The demo dataset is set up to include all features and is an excellent place to start getting used to Fontus before loading your data. Data : this allows you to upload your data and map your fields to variables used by the system. The build in dataset includes groundwater water chemistry monitoring data from Basel/Switzerland. The original dataset is published on the Open Data Portal of Basel. Plots : Allows to plot various plots commonly used to study water quality data. In the current version, Piper plots and maps are supported. Analyses : Allows to apply of various numerical analyses commonly used in the study of water quality data. In the current version, the Mann-Kendall test is supported. Calculators : Offers a set of calculators to perform standard calculations in water chemistry data. The current version supports formula weight conversion, sodium adsorption ratio calculation for irrigation water, formula weight calculations for minerals and the mineral Saturation Index claculation using PHREEQC.","title":"Gettings started"},{"location":"about/","text":"About Fontus Fontus is a powerful data analysis tool written in Python and utilizing state-of-the-art frameworks and libraries: Fontus uses Streamlit as its web application framework to build the graphical user interface. The library Bokeh is used to generate most charts. The chempy library is used for atomic weights and parsing of chemical formulas. pymannkendall is used to implement the Mann Kendall test to montonic trends in time series. The main demo dataset is sourced from the opendata portal data.bs . WQChartPy is an open-source Python package for producing water quality charts in a jupyter notebook environment. Fontus has been inspired by its Piper diagram and uses an example dataset from its git repository. The code for Fontus is freely available on GitHub under a specified license and plans for further development and added diagrams and analysis methods are in the works.","title":"About Fontus"},{"location":"about/#about-fontus","text":"Fontus is a powerful data analysis tool written in Python and utilizing state-of-the-art frameworks and libraries: Fontus uses Streamlit as its web application framework to build the graphical user interface. The library Bokeh is used to generate most charts. The chempy library is used for atomic weights and parsing of chemical formulas. pymannkendall is used to implement the Mann Kendall test to montonic trends in time series. The main demo dataset is sourced from the opendata portal data.bs . WQChartPy is an open-source Python package for producing water quality charts in a jupyter notebook environment. Fontus has been inspired by its Piper diagram and uses an example dataset from its git repository. The code for Fontus is freely available on GitHub under a specified license and plans for further development and added diagrams and analysis methods are in the works.","title":"About Fontus"},{"location":"quick_start/","text":"Quick Start Exploring the demo dataset The demo dataset includes 54 samples from the groundwater monitoring network of Basel (Switzerland). The raw data can be found on the city's Opendata portal . Inspecting the table and fields in the Load Data section, you will note that the dataset includes a station-name, coordinates, sampling date and the major ions calcium magnesium, sodium, potassium, chloride, sulfate, bicarbonate, and carbonate. The data table has basic interactivity features: By hovering over the header cells, you can change the column width, and clicking on a header cell allows you to sort the table ascending and descending according to the values in this column. If you wish to inspect the data with your local editor or spreadsheet software, you can download the table by clicking the Download data as CSV button. To get an impression of the Piper diagram using the initial settings, navigate to the Show Plot section and press the Plot button above the Documentation link in the sidebar. You will see the following output: Hovering over the markers in the plot will display a tooltip with the values for this sample. This technique becomes difficult for markers, which are closely grouped or overlapping. In this case, the zoom tool becomes handy: Activate the icon in the toolbar to the right of the plot, then zoom into a section with overlapping symbols. In the resulting blow-up plot it is easy to select a single marker to verify the respective composition. To restore the original setting, press on the icon in the plots toolbox. Group by Plot Option To inspect analyses from a single station one by one, proceed as follows: In the filter box in the sidebar, select one or several stations. Then press plot again to display the diagram based on the filtered data. If you wish to inspect every single station, you should use the Group plot by option from the Plot settings tab. Select a station from the list of available group-by-fields to generate a separate plot for each expression found in the station. There are two ways of assigning text to each diagram showing which station is represented. Use the title option and include the group-by-field within curly brackets. After pressing the Plot button again, each plot will now include a title with the station name. Ultimately you will want to save your plot to a file so you can include it in your report. In the plot settings, you can choose the output format. PNG files are a common bitmap format and can be included in most documents. The png format has its limitations when scaling up. The SVG format is a vectorized format and therefore does have the mentioned scaling limitations. However, it is not as widely importable in all graphics text processing software as the PNG format. Sometimes, SVG files are not completely rendered when imported. After choosing your preferred format, you have to select the save images option in the settings box of the sidebar. With this option active, Fontus generates an image file for each rendered plot. You can download the images of the last run using the Download Image button in the sidebar. The file is downloaded to your download folder and can be retrieved from there. If you have generated multiple plots by using the group plot by function, all imaged files will be summarized in a single zip file. Use of Markers Markers are commonly divided into different groups by applying different colors, sizes, and shapes. Use the Group legend by option to define which field will be used. Station, aquifer, sampling event, year, or season are typical candidates. In our demo dataset, there is only a single field available for grouping, the station field. However, Fontus allows the calculation of various time aggregation fields based on the sample_date field. In the Load Data tab, check the checkboxes Year column, Month column, and Season column. ![](./img/quickstart07.png This will generate the respective columns and add them to the imported data, and these fields become available for grouping or filtering the same way as the imported data does. For example by selecting the year field in the Group Legend by selectbox and also using {year} as the plot title, one plot per year with available data will be rendered. To show different symbols for each year, set the Group legend by option to year. You may also define the markers. Fontus allows you to define a list of marker types as well as a color palette and the number of colors from this palette. There are three ways to automatically generate symbols. - Option 1 will cycle through symbol types first, then through the colors. Therefore the first marker will be a blue square, a blue circle, then a light blue square and a light blue circle, and so on until there are no new codes for which markers must be generated. The result is shown below. - Option 2 will cycle through colors first while holding the symbol constant. Once all colors have been used, the second marker type will be used, etc. - Option 3 moves through symbols and colors simultaneously. Make sure that you have defined the same number of colors and symbols. This option is useful if you know the number of markers needed and this number is not larger than the list of defined symbol types and colors, as once markers have cycled through all colors, the same combination of type and color will be generated again. Upload your own Data This chapter explains the steps for uploading and exploring your own dataset, which is the standard way of using this software once you know your way around. The current example uses a dataset from Liu et al and can be downloaded directly from https://lcalmbach.github.io/fontus-help/data/data_Liu_et_al_2021.csv, or from its original location https://github.com/jyangfsu/WQChartPy/blob/main/data/data_Liu_et_al_2021.csv. Store the file locally on your disk. Navigate to the Load Data tab. Set the Upload Data radio button to upload the dataset. Set the Separator Character to comma (,). Drag and drop the saved data file on the Upload CSV file field. In the fields section, you may notice that a number of fields were detected as string-type fields and therefore assigned as group-fields . This does not have any impact on calculations, but it may unnecessarily overload the filter section. Only the fields id and shortid have a limited number of distinct values and therefore are good candidates for group-by fields. All other string fields (X, Y, Sy, Sm) may be set to the Map the type as None . Also note that in the bottom section, you can select the default carbonate parameter. In natural water HCO 3 - + CO 3 -- and Alkalinity should be very similar since Alkalinity is equal to: HCO 3 - + CO 3 -- + OH - and some other species, present in very small concentrations in ambient water. Alkalinity should be expressed in mg/L as CaCO 3 . Set the Plot legend by parameter to shortid Navigate to the Show Plot tab and press the Plot button in the sidebar. The following plot should show in the main window: This concludes the quickstart tutorial.","title":"Tutorial"},{"location":"quick_start/#quick-start","text":"","title":"Quick Start"},{"location":"quick_start/#exploring-the-demo-dataset","text":"The demo dataset includes 54 samples from the groundwater monitoring network of Basel (Switzerland). The raw data can be found on the city's Opendata portal . Inspecting the table and fields in the Load Data section, you will note that the dataset includes a station-name, coordinates, sampling date and the major ions calcium magnesium, sodium, potassium, chloride, sulfate, bicarbonate, and carbonate. The data table has basic interactivity features: By hovering over the header cells, you can change the column width, and clicking on a header cell allows you to sort the table ascending and descending according to the values in this column. If you wish to inspect the data with your local editor or spreadsheet software, you can download the table by clicking the Download data as CSV button. To get an impression of the Piper diagram using the initial settings, navigate to the Show Plot section and press the Plot button above the Documentation link in the sidebar. You will see the following output: Hovering over the markers in the plot will display a tooltip with the values for this sample. This technique becomes difficult for markers, which are closely grouped or overlapping. In this case, the zoom tool becomes handy: Activate the icon in the toolbar to the right of the plot, then zoom into a section with overlapping symbols. In the resulting blow-up plot it is easy to select a single marker to verify the respective composition. To restore the original setting, press on the icon in the plots toolbox.","title":"Exploring the demo dataset"},{"location":"quick_start/#group-by-plot-option","text":"To inspect analyses from a single station one by one, proceed as follows: In the filter box in the sidebar, select one or several stations. Then press plot again to display the diagram based on the filtered data. If you wish to inspect every single station, you should use the Group plot by option from the Plot settings tab. Select a station from the list of available group-by-fields to generate a separate plot for each expression found in the station. There are two ways of assigning text to each diagram showing which station is represented. Use the title option and include the group-by-field within curly brackets. After pressing the Plot button again, each plot will now include a title with the station name. Ultimately you will want to save your plot to a file so you can include it in your report. In the plot settings, you can choose the output format. PNG files are a common bitmap format and can be included in most documents. The png format has its limitations when scaling up. The SVG format is a vectorized format and therefore does have the mentioned scaling limitations. However, it is not as widely importable in all graphics text processing software as the PNG format. Sometimes, SVG files are not completely rendered when imported. After choosing your preferred format, you have to select the save images option in the settings box of the sidebar. With this option active, Fontus generates an image file for each rendered plot. You can download the images of the last run using the Download Image button in the sidebar. The file is downloaded to your download folder and can be retrieved from there. If you have generated multiple plots by using the group plot by function, all imaged files will be summarized in a single zip file.","title":"Group by Plot Option"},{"location":"quick_start/#use-of-markers","text":"Markers are commonly divided into different groups by applying different colors, sizes, and shapes. Use the Group legend by option to define which field will be used. Station, aquifer, sampling event, year, or season are typical candidates. In our demo dataset, there is only a single field available for grouping, the station field. However, Fontus allows the calculation of various time aggregation fields based on the sample_date field. In the Load Data tab, check the checkboxes Year column, Month column, and Season column. ![](./img/quickstart07.png This will generate the respective columns and add them to the imported data, and these fields become available for grouping or filtering the same way as the imported data does. For example by selecting the year field in the Group Legend by selectbox and also using {year} as the plot title, one plot per year with available data will be rendered. To show different symbols for each year, set the Group legend by option to year. You may also define the markers. Fontus allows you to define a list of marker types as well as a color palette and the number of colors from this palette. There are three ways to automatically generate symbols. - Option 1 will cycle through symbol types first, then through the colors. Therefore the first marker will be a blue square, a blue circle, then a light blue square and a light blue circle, and so on until there are no new codes for which markers must be generated. The result is shown below. - Option 2 will cycle through colors first while holding the symbol constant. Once all colors have been used, the second marker type will be used, etc. - Option 3 moves through symbols and colors simultaneously. Make sure that you have defined the same number of colors and symbols. This option is useful if you know the number of markers needed and this number is not larger than the list of defined symbol types and colors, as once markers have cycled through all colors, the same combination of type and color will be generated again.","title":"Use of Markers"},{"location":"quick_start/#upload-your-own-data","text":"This chapter explains the steps for uploading and exploring your own dataset, which is the standard way of using this software once you know your way around. The current example uses a dataset from Liu et al and can be downloaded directly from https://lcalmbach.github.io/fontus-help/data/data_Liu_et_al_2021.csv, or from its original location https://github.com/jyangfsu/WQChartPy/blob/main/data/data_Liu_et_al_2021.csv. Store the file locally on your disk. Navigate to the Load Data tab. Set the Upload Data radio button to upload the dataset. Set the Separator Character to comma (,). Drag and drop the saved data file on the Upload CSV file field. In the fields section, you may notice that a number of fields were detected as string-type fields and therefore assigned as group-fields . This does not have any impact on calculations, but it may unnecessarily overload the filter section. Only the fields id and shortid have a limited number of distinct values and therefore are good candidates for group-by fields. All other string fields (X, Y, Sy, Sm) may be set to the Map the type as None . Also note that in the bottom section, you can select the default carbonate parameter. In natural water HCO 3 - + CO 3 -- and Alkalinity should be very similar since Alkalinity is equal to: HCO 3 - + CO 3 -- + OH - and some other species, present in very small concentrations in ambient water. Alkalinity should be expressed in mg/L as CaCO 3 . Set the Plot legend by parameter to shortid Navigate to the Show Plot tab and press the Plot button in the sidebar. The following plot should show in the main window: This concludes the quickstart tutorial.","title":"Upload your own Data"},{"location":"version_history/","text":"Version History 0.0.3 (2022-12-31) Intial release 0.1.0 (2023-02-15) New Features: - Integration of PHREEQC library for geochemical calculations - New Map plot - Mann Kendall Analyisis using library pyMannKendall (Hussain et al., (2019) - New formula weight conversion calculator built on library pychem - New formula weight calculation - New Saturation Index (SI) calculator Improved and bugfixes: - Proportional size and color markers for piper plots.","title":"Release notes"},{"location":"version_history/#version-history","text":"","title":"Version History"},{"location":"version_history/#003-2022-12-31","text":"Intial release","title":"0.0.3 (2022-12-31)"},{"location":"version_history/#010-2023-02-15","text":"New Features: - Integration of PHREEQC library for geochemical calculations - New Map plot - Mann Kendall Analyisis using library pyMannKendall (Hussain et al., (2019) - New formula weight conversion calculator built on library pychem - New formula weight calculation - New Saturation Index (SI) calculator Improved and bugfixes: - Proportional size and color markers for piper plots.","title":"0.1.0 (2023-02-15)"},{"location":"analyses/intro/","text":"Numeric Analyses This section intends to offer several numeric analysis tools to explore your dataset. The current version only covers the Mann Kendall trend analysis. For each analysis, the user may configure all settings on the tab Analysis Settings . Fontus then shows the output of the analysis in the Show Analysis tab.","title":"Introduction"},{"location":"analyses/intro/#numeric-analyses","text":"This section intends to offer several numeric analysis tools to explore your dataset. The current version only covers the Mann Kendall trend analysis. For each analysis, the user may configure all settings on the tab Analysis Settings . Fontus then shows the output of the analysis in the Show Analysis tab.","title":"Numeric Analyses"},{"location":"analyses/mann_kendall/","text":"Mann Kendall Test Introduction The Mann-Kendall (MK) trend analysis is a statistical method used to assess if there is a monotonic (increasing or decreasing) trend in a time series data. It is non-parametric, meaning it does not assume a specific distribution of the data, and can be applied to irregular or missing data. The test calculates a Kendall's tau statistic, which measures the strength and direction of the trend, and a p-value, which indicates the significance of the trend. The Mann-Kendall test is commonly used in fields such as hydrology, meteorology, and environmental science. The Mann-Kendall test is a hypothesis where the null hypothesis for this test is that there is no monotonic trend in the series. The alternate hypothesis is that a trend exists. This trend can be positive, negative, or non-null. A detailed introduction can be found on wikitia Requirements The Mann Kendall test requires a date type column in the dataset. This columns must be mapped to the sample_date system parameter as discussed in the Data-Field Mapping section . The dataset must also include at least one numeric variable. Analysis Settings Group by parameter : An uploaded dataset may include various grouping parameters, which group the samples accourding to a specific property. The Mann-Kendall may be performed for each of these groups. The station is the most common group by parameter used for this purpose, but other parameters may be used in a special setting. For example, if all records originate from the same station and your dataset only include the date and corresponding value, the group by parameter may even be left empty. Analysis Parameter : This is the numeric analysis, for which fontus performs the MK test. Minimum Number of Points : The MK test accounts for the number of data points used in the test. The fewer points the hight the evidence for a trend result must be. However, you may set a limit of points. Stations that do not reach this threshold, will not be processed and can be hiddedn from the selection grid of stations. Hide Samples with Unsufficient Points : Stations which do not attain the required minimum number of points as discussed above, can be hidden from the selection grid. This allows the user to focus on stations, that have sufficiently long time series. Prediction Type : Fontus calculates a linear regression for every time series. This line may be used for value prediction. Two types available: Fpr the Predict time when the specified value is reached, a value must be specified. Typically this is the guideline value. For example, for nitrate, it may be the WHO guideline of 50 mg/L as nitrate ion (equivalent to 11 mg/L as Nitrate-nitrogen). Fontus calculates the date when the extrapolated regression line intersects this guideline value. The second estimate allows the user to select a year in the future and calculates the value reached for this date. Time Series Plot Options : The Y-axis range can be set to constant values for all time series. Without this setting, the time series plot adjusts its y-axis range to the minimum and maximum value in the dataset. Using a constant y-axis range may prove helpful to render the plot output more comparable. For example, it is easier to spot low or high variability in two-time series if both plots share the same time y-axis range. Running a Mann Kendall Test To run the MK test, verify and adapt the system default settings and press on the Show Analysis tab. Fontus displays a selection grid with one row per unique value of the group-by-parameter (normally the station). When a record is selected, the following screen will show. Fontus shows calculated statistical values in a grid and plots the time series diagram to the right of this table. The calculated output includes the following values: Parameter Description station name of selected station count number of datapoints trend trend result: increasing, decreasing, no trend p probablilty value of tau Kendall Tau, measure for the correlation between 2 parameters s Mann-Kendal\u2019s score, sen_slope median slope for the connecting lines in the time series sen intercept intercept for sens line regr intercept intercept for linear regression line regr_slope slope of linear regression line regr_rvalue correlation coefficient for linerar regression Below each MK output the data can be viewed by expanding the initially collapsed box names View Values . At the bottom of this box, a download button allows the user to download the data to a comma seperated text file.","title":"Mann Kendall"},{"location":"analyses/mann_kendall/#mann-kendall-test","text":"","title":"Mann Kendall Test"},{"location":"analyses/mann_kendall/#introduction","text":"The Mann-Kendall (MK) trend analysis is a statistical method used to assess if there is a monotonic (increasing or decreasing) trend in a time series data. It is non-parametric, meaning it does not assume a specific distribution of the data, and can be applied to irregular or missing data. The test calculates a Kendall's tau statistic, which measures the strength and direction of the trend, and a p-value, which indicates the significance of the trend. The Mann-Kendall test is commonly used in fields such as hydrology, meteorology, and environmental science. The Mann-Kendall test is a hypothesis where the null hypothesis for this test is that there is no monotonic trend in the series. The alternate hypothesis is that a trend exists. This trend can be positive, negative, or non-null. A detailed introduction can be found on wikitia","title":"Introduction"},{"location":"analyses/mann_kendall/#requirements","text":"The Mann Kendall test requires a date type column in the dataset. This columns must be mapped to the sample_date system parameter as discussed in the Data-Field Mapping section . The dataset must also include at least one numeric variable.","title":"Requirements"},{"location":"analyses/mann_kendall/#analysis-settings","text":"Group by parameter : An uploaded dataset may include various grouping parameters, which group the samples accourding to a specific property. The Mann-Kendall may be performed for each of these groups. The station is the most common group by parameter used for this purpose, but other parameters may be used in a special setting. For example, if all records originate from the same station and your dataset only include the date and corresponding value, the group by parameter may even be left empty. Analysis Parameter : This is the numeric analysis, for which fontus performs the MK test. Minimum Number of Points : The MK test accounts for the number of data points used in the test. The fewer points the hight the evidence for a trend result must be. However, you may set a limit of points. Stations that do not reach this threshold, will not be processed and can be hiddedn from the selection grid of stations. Hide Samples with Unsufficient Points : Stations which do not attain the required minimum number of points as discussed above, can be hidden from the selection grid. This allows the user to focus on stations, that have sufficiently long time series. Prediction Type : Fontus calculates a linear regression for every time series. This line may be used for value prediction. Two types available: Fpr the Predict time when the specified value is reached, a value must be specified. Typically this is the guideline value. For example, for nitrate, it may be the WHO guideline of 50 mg/L as nitrate ion (equivalent to 11 mg/L as Nitrate-nitrogen). Fontus calculates the date when the extrapolated regression line intersects this guideline value. The second estimate allows the user to select a year in the future and calculates the value reached for this date. Time Series Plot Options : The Y-axis range can be set to constant values for all time series. Without this setting, the time series plot adjusts its y-axis range to the minimum and maximum value in the dataset. Using a constant y-axis range may prove helpful to render the plot output more comparable. For example, it is easier to spot low or high variability in two-time series if both plots share the same time y-axis range.","title":"Analysis Settings"},{"location":"analyses/mann_kendall/#running-a-mann-kendall-test","text":"To run the MK test, verify and adapt the system default settings and press on the Show Analysis tab. Fontus displays a selection grid with one row per unique value of the group-by-parameter (normally the station). When a record is selected, the following screen will show. Fontus shows calculated statistical values in a grid and plots the time series diagram to the right of this table. The calculated output includes the following values: Parameter Description station name of selected station count number of datapoints trend trend result: increasing, decreasing, no trend p probablilty value of tau Kendall Tau, measure for the correlation between 2 parameters s Mann-Kendal\u2019s score, sen_slope median slope for the connecting lines in the time series sen intercept intercept for sens line regr intercept intercept for linear regression line regr_slope slope of linear regression line regr_rvalue correlation coefficient for linerar regression Below each MK output the data can be viewed by expanding the initially collapsed box names View Values . At the bottom of this box, a download button allows the user to download the data to a comma seperated text file.","title":"Running a Mann Kendall Test"},{"location":"calculators/fmw_calculation/","text":"Formula Weight Calculation Calculating the formula weight for a given mineral or dissolved constituent is a common task when working with hydrochemical data. The Formula Weight Calculator allows you to select a predefined mineral or enter a formula manually. Fontus calculates the corresponding formula weight automatically after every change in the form. The coefficients for elements in the formula must be whole numbers. Minerals such as Na.96Al.96Si2.04O6:H2O (Analcime) will not be calculated correctly. The notation for hydrous minerals containing water in their structure uses a dot to separate the mineral from the water molecule. For example, the gypsum formula must be written as CaSO4.2(H2O), the notation CaSO4:2(H2O) or CaSO4\u00b72(H2O). Also, ensure that if the numeric factor in the formula relates to more than just the next element, the group of elements to be multiplied by the coefficient must be embraced by parentheses. For example, writing gypsum as CaSO4.2H2O would give a wrong result since only hydrogen is multiplied by a factor of two. In contrast, in the formula written as CaSO4.2(H2O) the entire water molecule is multiplied. Below the formula weight calculation output field, the formula elements are shown with their element-molal weight, amount of mols, total weight, and weight percent. The figure below shows the example for the calculation of Calcite (CaCO 3 ). In the bottom section of the form, Fontus displays an expander widget, including a list of the periodic system, specifying the name, symbol, and atomic mass for all elements. All elements include hyperlinks to their page on wikipedia.","title":"Formula Weight Calculation"},{"location":"calculators/fmw_calculation/#formula-weight-calculation","text":"Calculating the formula weight for a given mineral or dissolved constituent is a common task when working with hydrochemical data. The Formula Weight Calculator allows you to select a predefined mineral or enter a formula manually. Fontus calculates the corresponding formula weight automatically after every change in the form. The coefficients for elements in the formula must be whole numbers. Minerals such as Na.96Al.96Si2.04O6:H2O (Analcime) will not be calculated correctly. The notation for hydrous minerals containing water in their structure uses a dot to separate the mineral from the water molecule. For example, the gypsum formula must be written as CaSO4.2(H2O), the notation CaSO4:2(H2O) or CaSO4\u00b72(H2O). Also, ensure that if the numeric factor in the formula relates to more than just the next element, the group of elements to be multiplied by the coefficient must be embraced by parentheses. For example, writing gypsum as CaSO4.2H2O would give a wrong result since only hydrogen is multiplied by a factor of two. In contrast, in the formula written as CaSO4.2(H2O) the entire water molecule is multiplied. Below the formula weight calculation output field, the formula elements are shown with their element-molal weight, amount of mols, total weight, and weight percent. The figure below shows the example for the calculation of Calcite (CaCO 3 ). In the bottom section of the form, Fontus displays an expander widget, including a list of the periodic system, specifying the name, symbol, and atomic mass for all elements. All elements include hyperlinks to their page on wikipedia.","title":"Formula Weight Calculation"},{"location":"calculators/fmw_conversion/","text":"Formula Weight Conversion Dissolved chemical elements may occur as different species in an aqueous solution. Nitrate (N) is a common example which may occur as NO 3 , NH 3 - , NO 2 or Si, occuring as H 2 SiO 3 or H 3 SiO 4 . Since laboratories often report results in mg/L or \u00b5g/L concentration, values vary depending on which species is used to express the element of concern. The conversion for a is calculated as follows: $$ \\frac{n\\ X\\ as\\ Species\\ A\\text{ (mg/L)}}{\\text{FMW(A)}} \\times \\text{FMW(B)} $$ where FMW(A) is the formula weight of A, FMW(B) is the formula weight of species B in g/Mol and n is the number of mols of element X in formula A. The figure below shows the example of 10 mg/L N as N which is to be expressed as NO 3 . The guidline value for nitrate is commonly set to 50 or 11 mg/L depending on which formula is used for the nitrate-nitrogen. $$ \\frac{11}{\\text{62}} \\times \\text{14.01} = 48.7 $$","title":"Formula Weight Conversion"},{"location":"calculators/fmw_conversion/#formula-weight-conversion","text":"Dissolved chemical elements may occur as different species in an aqueous solution. Nitrate (N) is a common example which may occur as NO 3 , NH 3 - , NO 2 or Si, occuring as H 2 SiO 3 or H 3 SiO 4 . Since laboratories often report results in mg/L or \u00b5g/L concentration, values vary depending on which species is used to express the element of concern. The conversion for a is calculated as follows: $$ \\frac{n\\ X\\ as\\ Species\\ A\\text{ (mg/L)}}{\\text{FMW(A)}} \\times \\text{FMW(B)} $$ where FMW(A) is the formula weight of A, FMW(B) is the formula weight of species B in g/Mol and n is the number of mols of element X in formula A. The figure below shows the example of 10 mg/L N as N which is to be expressed as NO 3 . The guidline value for nitrate is commonly set to 50 or 11 mg/L depending on which formula is used for the nitrate-nitrogen. $$ \\frac{11}{\\text{62}} \\times \\text{14.01} = 48.7 $$","title":"Formula Weight Conversion"},{"location":"calculators/intro/","text":"Calculators This section offers a number of calculators assisting you with calculations and conversions commonly required when working with hydrochemical data. The current version, covers figure","title":"Introduction"},{"location":"calculators/intro/#calculators","text":"This section offers a number of calculators assisting you with calculations and conversions commonly required when working with hydrochemical data. The current version, covers figure","title":"Calculators"},{"location":"calculators/sar/","text":"Irrigation Water quality The chemical composition of irrigation water plays a crucial role in determining its quality and suitability for use in agriculture. In particular, the sodium content of irrigation water can have a significant impact on soil and plant health. High levels of sodium in irrigation water can lead to soil dispersion, making it difficult for plants to absorb essential nutrients. Additionally, high sodium levels in the soil can reduce the water uptake capacity of the roots, leading to drought stress in plants. Excess sodium can also accumulate in the soil over time, making it unsuitable for growing crops. For these reasons, it is important to carefully monitor the sodium content of irrigation water and take appropriate measures to manage it, such as blending the water with other sources or using sodium removal treatments. (Source: OpenAI GPT-3, 2023). Fontus calculates the Sodium Adsorption Ratio (SAR) and Residual Sodium Carbonate (RSC), two indicators commonly used for irrigation water quality analysis. Sodium Adsorption Ratio (SAR) The Sodium adsorption ratio (SAR) is an irrigation water quality parameter used in the management of sodium-affected soils. It is an indicator of the suitability of water for use in agricultural irrigation, as determined from the concentrations of the main alkaline and earth alkaline cations present in the water. It is also a standard diagnostic parameter for the sodicity hazard of a soil, as determined from analysis of pore water extracted from the soil.[ wikipedia ]. The formula for calculating the sodium adsorption ratio (SAR) is: $$ SAR = \\frac{[Na^+]}{\\sqrt{\\frac{1}{2}(Ca^{2+} + Mg^{2+})}} $$ Fontus calculates the SAR value and classifies the value according to the following table published by the Oklahoma State University . Other countries may use different delimitations of SAR class boundaries and management recommendations. SAR Classification Management Considerations <1 Excellent None 1-2 Good Little concern, add pelletized gypsum periodically 2-4 Fair Aerify soil, sand topdress, apply pelletized gypsum, monitor soil salinity 4-8 Poor Aerify soil, sand topdress, apply pelletized gypsum, leach soil regularly, monitor soil salinity closely 8-15 Very Poor' Requires special attention; consult water quality specialist >15 Unacceptable Do not use The SAR calculator allows two different data input modes: - Select a sample from the dataset (default) - Enter all concentrations manually The first option displays a list of samples from which the user can select. This list is only displayed if the dataset includes the required input parameters (Sodium, Calcium, and Magnesium). When a row is selected, the corresponding SAR result is calculated and shown below the table. - The second option requires manual input for Sodium, Calcium and Magnesium: The SAR has been combined with ta carboante satruation assessment ot produc an index refrerre to as the adjusted SAR (Adj. SAR) by Obwer, Ogata and Ticker 1968. It is defined as: $$ adj.\\ SAR = SAR \u00b7 (1+(8.4-pH_c)) $$ where SAR is the SAR for irrigation water, 8.4 is the approximate pH of a non sodic saline soil in equilibrium with CaCO 3 , and pH C is the pH for which the inspected solution would be in equilibrium with calcite (J.W. Lloyd and J.A. Heathcote (1985). Fontus performs a PHREEQC simulation to calculate the equilibrium-pH. Residual Sodium Carbonate (RSC) The bicarbonate hazard is expressed by the residual sodium carbonate (RSC) where: $$ RSC = ([HCO_3 ^-] + [CO_3 ^2-]) - ([Ca^2+] + [Mg^2+]) $$ All units are in meq/L. According to J.W. Lloyd and J.A. Heathcote (1985), the classification of RSC is outlined as follows: RSC (meq/L) Condition <1.25 Suitable 1.25 - 2.5 Marginal > 2.5 Not suitable","title":"Irrigation Water Quality"},{"location":"calculators/sar/#irrigation-water-quality","text":"The chemical composition of irrigation water plays a crucial role in determining its quality and suitability for use in agriculture. In particular, the sodium content of irrigation water can have a significant impact on soil and plant health. High levels of sodium in irrigation water can lead to soil dispersion, making it difficult for plants to absorb essential nutrients. Additionally, high sodium levels in the soil can reduce the water uptake capacity of the roots, leading to drought stress in plants. Excess sodium can also accumulate in the soil over time, making it unsuitable for growing crops. For these reasons, it is important to carefully monitor the sodium content of irrigation water and take appropriate measures to manage it, such as blending the water with other sources or using sodium removal treatments. (Source: OpenAI GPT-3, 2023). Fontus calculates the Sodium Adsorption Ratio (SAR) and Residual Sodium Carbonate (RSC), two indicators commonly used for irrigation water quality analysis.","title":"Irrigation Water quality"},{"location":"calculators/sar/#sodium-adsorption-ratio-sar","text":"The Sodium adsorption ratio (SAR) is an irrigation water quality parameter used in the management of sodium-affected soils. It is an indicator of the suitability of water for use in agricultural irrigation, as determined from the concentrations of the main alkaline and earth alkaline cations present in the water. It is also a standard diagnostic parameter for the sodicity hazard of a soil, as determined from analysis of pore water extracted from the soil.[ wikipedia ]. The formula for calculating the sodium adsorption ratio (SAR) is: $$ SAR = \\frac{[Na^+]}{\\sqrt{\\frac{1}{2}(Ca^{2+} + Mg^{2+})}} $$ Fontus calculates the SAR value and classifies the value according to the following table published by the Oklahoma State University . Other countries may use different delimitations of SAR class boundaries and management recommendations. SAR Classification Management Considerations <1 Excellent None 1-2 Good Little concern, add pelletized gypsum periodically 2-4 Fair Aerify soil, sand topdress, apply pelletized gypsum, monitor soil salinity 4-8 Poor Aerify soil, sand topdress, apply pelletized gypsum, leach soil regularly, monitor soil salinity closely 8-15 Very Poor' Requires special attention; consult water quality specialist >15 Unacceptable Do not use The SAR calculator allows two different data input modes: - Select a sample from the dataset (default) - Enter all concentrations manually The first option displays a list of samples from which the user can select. This list is only displayed if the dataset includes the required input parameters (Sodium, Calcium, and Magnesium). When a row is selected, the corresponding SAR result is calculated and shown below the table. - The second option requires manual input for Sodium, Calcium and Magnesium: The SAR has been combined with ta carboante satruation assessment ot produc an index refrerre to as the adjusted SAR (Adj. SAR) by Obwer, Ogata and Ticker 1968. It is defined as: $$ adj.\\ SAR = SAR \u00b7 (1+(8.4-pH_c)) $$ where SAR is the SAR for irrigation water, 8.4 is the approximate pH of a non sodic saline soil in equilibrium with CaCO 3 , and pH C is the pH for which the inspected solution would be in equilibrium with calcite (J.W. Lloyd and J.A. Heathcote (1985). Fontus performs a PHREEQC simulation to calculate the equilibrium-pH.","title":"Sodium Adsorption Ratio (SAR)"},{"location":"calculators/sar/#residual-sodium-carbonate-rsc","text":"The bicarbonate hazard is expressed by the residual sodium carbonate (RSC) where: $$ RSC = ([HCO_3 ^-] + [CO_3 ^2-]) - ([Ca^2+] + [Mg^2+]) $$ All units are in meq/L. According to J.W. Lloyd and J.A. Heathcote (1985), the classification of RSC is outlined as follows: RSC (meq/L) Condition <1.25 Suitable 1.25 - 2.5 Marginal > 2.5 Not suitable","title":"Residual Sodium Carbonate (RSC)"},{"location":"calculators/saturation_index/","text":"Saturation index Introduction The Mineral Saturation Index (SI) is a measure of the saturation state of an aqueous solution with respect to specific minerals. It is calculated by comparing the product of the ion activities of the ions that form a mineral, called the Ion Activity Product (IAP), with the solubility product constant (Ksp) of that mineral. If the IAP is equal to the Ksp, the solution is said to be at saturation with respect to that mineral, and the SI is equal to zero. If the IAP is less than the Ksp, the solution is undersaturated with respect to that mineral, and the SI is negative. Conversely, if the IAP is greater than the Ksp, the solution is supersaturated with respect to that mineral, and the SI is positive. The SI is an important concept in water quality and soil science, as it provides information on the potential for mineral precipitation or dissolution in a solution. For example, high SI values can indicate a potential for mineral precipitation, which can cause scaling or clogging of irrigation systems, while low SI values can indicate a potential for mineral dissolution, which can lead to soil degradation. By knowing the SI of a solution, water managers and soil scientists can make informed decisions about water quality and soil management, helping to maintain the long-term productivity and sustainability of soil and water resources(Source: OpenAI GPT-3, 2023). Fontus uses the geochemical modeling software PHREEQC for all SI calculations as outlined below. PHREEQC Engine PHREEQC is a widely used geochemical modeling software for calculating mineral solubility. Fontus interfaces with PHREEQC by sending user-specified concentrations and minerals to the software, which then converts them into ion activities and calculates the Ion Activity Product (IAP). The IAP is compared to the temperature-dependent solubility product, and the resulting Mineral Saturation Index (SI) is returned to the graphical user interface. To ensure accurate results, it is important that the required parameters are included in the dataset and correctly mapped to the PHREEQC master species, as described in Chapter PHRREEQC-Mapping in the data manual. Calculator Input If the data source radio selection is set to the options Select sample from the dataset a table is presented with all available samples. Upon selecting a record, Fontus shows the respective concentrations used as input in the PHREEQC model in the form below, where they may be altered or completed. For example, in the example below, no temperature data is available for the samples in the second and third row. However, the temperature is a required parameter for the solubility calculation and a default value of 25\u00b0C will be used by PHREEQC if not specfied otherwise. Since data is known from this station, filling in a estimated value, for example by by copying the temperure from a nearby well, will be closer to the actual water temperature and will provide a more realistic SI result. Calculator Output \"The output of the calculator is contingent upon the minerals that have been selected. If no minerals were chosen, Fontus will return saturation indices for all minerals that can be calculated based on the provided input. For instance, in order to calculate the SI of calcite, the solution must contain inputs for calcium, bicarbonate or alkalinity, and pH. If the user selects specific minerals, only their saturation indices will be displayed, given that the solution contains the necessary components for the calculation. If the user selects Enter data manually as the datasource, the user must enter all concentrations and other required PHREEQC input parameters manually in the input form.","title":"Saturation Index"},{"location":"calculators/saturation_index/#saturation-index","text":"","title":"Saturation index"},{"location":"calculators/saturation_index/#introduction","text":"The Mineral Saturation Index (SI) is a measure of the saturation state of an aqueous solution with respect to specific minerals. It is calculated by comparing the product of the ion activities of the ions that form a mineral, called the Ion Activity Product (IAP), with the solubility product constant (Ksp) of that mineral. If the IAP is equal to the Ksp, the solution is said to be at saturation with respect to that mineral, and the SI is equal to zero. If the IAP is less than the Ksp, the solution is undersaturated with respect to that mineral, and the SI is negative. Conversely, if the IAP is greater than the Ksp, the solution is supersaturated with respect to that mineral, and the SI is positive. The SI is an important concept in water quality and soil science, as it provides information on the potential for mineral precipitation or dissolution in a solution. For example, high SI values can indicate a potential for mineral precipitation, which can cause scaling or clogging of irrigation systems, while low SI values can indicate a potential for mineral dissolution, which can lead to soil degradation. By knowing the SI of a solution, water managers and soil scientists can make informed decisions about water quality and soil management, helping to maintain the long-term productivity and sustainability of soil and water resources(Source: OpenAI GPT-3, 2023). Fontus uses the geochemical modeling software PHREEQC for all SI calculations as outlined below.","title":"Introduction"},{"location":"calculators/saturation_index/#phreeqc-engine","text":"PHREEQC is a widely used geochemical modeling software for calculating mineral solubility. Fontus interfaces with PHREEQC by sending user-specified concentrations and minerals to the software, which then converts them into ion activities and calculates the Ion Activity Product (IAP). The IAP is compared to the temperature-dependent solubility product, and the resulting Mineral Saturation Index (SI) is returned to the graphical user interface. To ensure accurate results, it is important that the required parameters are included in the dataset and correctly mapped to the PHREEQC master species, as described in Chapter PHRREEQC-Mapping in the data manual.","title":"PHREEQC Engine"},{"location":"calculators/saturation_index/#calculator-input","text":"If the data source radio selection is set to the options Select sample from the dataset a table is presented with all available samples. Upon selecting a record, Fontus shows the respective concentrations used as input in the PHREEQC model in the form below, where they may be altered or completed. For example, in the example below, no temperature data is available for the samples in the second and third row. However, the temperature is a required parameter for the solubility calculation and a default value of 25\u00b0C will be used by PHREEQC if not specfied otherwise. Since data is known from this station, filling in a estimated value, for example by by copying the temperure from a nearby well, will be closer to the actual water temperature and will provide a more realistic SI result.","title":"Calculator Input"},{"location":"calculators/saturation_index/#calculator-output","text":"\"The output of the calculator is contingent upon the minerals that have been selected. If no minerals were chosen, Fontus will return saturation indices for all minerals that can be calculated based on the provided input. For instance, in order to calculate the SI of calcite, the solution must contain inputs for calcium, bicarbonate or alkalinity, and pH. If the user selects specific minerals, only their saturation indices will be displayed, given that the solution contains the necessary components for the calculation. If the user selects Enter data manually as the datasource, the user must enter all concentrations and other required PHREEQC input parameters manually in the input form.","title":"Calculator Output"},{"location":"data/data/","text":"Data Introduction This menu allows users to view the demo dataset's metadata and upload and configure their own dataset. The configuration mainly consists of mapping fields of the dataset to system parameters used by Fontus for plotting or calculations. For example, to construct a piper diagram, Fontus needs to know which parameter represents the calcium, magnesium, sodium concentrations, etc. This section also includes the settings for PHREEQC, the geochemical modeling engine used for advanced calculations such as mineral saturation indices. Users must map each PHREEQC model input parameter to the corresponding field in the uploaded dataset. The radio buttons at the top of the form allow the user to select the built-in demo dataset or to upload a dataset. No further actions are required if the mode is set to demo dataset. However, you might browse the data in the data grid or inspect the data and fields. Upload The Datasource radio-button allows the user to upload a file. Once the Upload Dataset option is selected, various import options and an upload field become available. Field Description Separator character character separating 2 fields Encoding file encoding Skip rows Number of rows containing header information that must be skipped. The column names row must not be skipped Has ND Values If this checkbox is activated, the program detects columns storing non detect values and extract the respective numerical values. Columns including non detects must also be mapped to the numerica data type Upload csv File Drag the file from your local disk to this field to upload the file Preview The Preview Data File section shows the uploaded data. Use the Download data as CSV button below this table to download the file. Typically, this is not useful since the table corresponds to the user's uploaded file. However, downloading the file may be helpful if the user wishes to download the demo dataset so he can reuse the file as a template for formatting data. Fields For many analyses, Fontus needs to be aware of specific parameters such as temperature, pH, calcium, magnesium, etc. Therefore the user must map all column names of the imported file to the corresponding system parameters. The easiest way to achieve this goal is to use the naming convention for your fields, as shown below. Using these names in your column names allows Fontus to map most parameters automatically. If you prefer to keep your data file as is, it is still possible to map columns to system parameters, as explained in the section below. Parameter Description Ca Calcium concentration in mg/L Mg Magnesium concentration in mg/L Na Sodium concentration in mg/L K Potassium in mg/L is not mandatory, but if present, it will be added to the sodium ternary endpoint in the Piper diagram Cl Chloride concentration in mg/L SO4 Sulfate concentration in mg/L HCO3 or Alk Bicarbonate concentration in mg/L or alternatively alkalinity in mg/L CaCO3 (CO3) Carbonate concentration in mg/L is not mandatory, but if found, it will be added to the bicarbonate ternary endpoint. pH Measured pH value temp measured water temperature longitude Geographic longitude latitude Geographic latitude sample_date Sampling data, must be in the format YYYY-MM-DD or YYYY-MM-DD mm:hh stationid unique identifier for the sampling location The Fields section shows all fields found in the uploaded data and the default settings that the system determines after the import. The user may map columns to the respective system parameter where applicable. If parameter names match the ones mentioned in the list above, Fontus generates the mapping automatically. Column : The column is the name found in the imported file; it cannot be changed unless the user updates the column name in the file and uploads it again. Column names must be unique and should not include spaces, brackets hyphens or any special characters. Label : Label used in the plots and tooltips. For concentrations, the label usually holds a name of the constituent, for example Calcium. Parameter Group : Assigning the parameter group to each field allows Fontus to generate an appropriate parameter options list to select from in various program sections. The following values are available: - station: a station parameter, typically elevation and coordinates. - sample: metadata pertaining to the sampling event such as sample date, sample number - observation: measured values such as concentrations, temperature, pH, etc. System Field: Columns may be mapped to system parameters, so the application understands the meaning of the data in this column. The available system fields are listed in the table above. Note that if you use these as column names in the uploaded file, the system will automatically detect and map the parameters. If you use a different column name, for example, \"total calcium\" instead of \"ca,\" you need to map your parameter manually. for system parameters, Fontus suggests a unit, which may be overwritten, if your dataset uses a different unit. Data Type: Data type for this column: str, float, int, and date. Fontus will assign all String parameters as group-by-parameters. Unit For parameters with data type float, a unit may be defined. For fields which have been mapped to a system parameter having an associated formula weight and valence, the unit is selected from a predfined selection list. These fields can be presented as different units in the program in the analysis. For all non mapped numeric parameters, the unit is a free-text field and the unit cannot be changed during analysis. Group-by-parameters are included in the GUI and can be used for filtering, plot legends, and plot grouping. If you want to suppress a column showing up as a filter field, set the respective parameter to \"not mapped.\" the group by field type proves most advantageous for categorical values that can be used for filtering or as legends in plots. Lookup Code For string parameters, Fontus shows a checkbox where the user may indicate whether the field's data is considered to be categorical. Categorical data consists of codes with a limited number of distinct values. Typical examples include geology, country, and county. Fields flagged as lookup lists can later be used as legends for plots and filters in plots and numerical analysis. By default, Fontus sets all string parameters as lookup codes. If a column of type string should not be used as a filter or as a plot legend, uncheck the checkbox. The Generate Time Aggregation Columns only appear if a parameter is mapped as the sample_date parameter. If this is the case, you may add one or multiple time aggregation columns: Year , Month , Season . These fields can later be used for filtering or as the legend in a Piper plot. The application uses a simplified algorithm where December to February is assigned to Winter, March to May to spring, June to August to summer, and September to November to fall. Note that for determining the season based on the sampling date, you should define the hemisphere of the project area. For the Southern hemisphere, Fontus will assign the seasons as follows: December to February: summer; March to May: fall, June to August: winter; and September to November: fall. Refrain from using this option if your uploaded data already includes the year, month, or season columns. Hemisphere : To calculate the season expression from the sample date, users must select the hemisphere of the project location must. If the dataset includes coordinates, Fontus determines the hemisphere automatically, and the parameter becomes read-only. Apply button : Pressing the apply button will generate the time columns and activate any parameter mapping changes. If the user enabled the Has ND (non detects) values options in the header section of this form, columns containing non-detect values such as <0.05 will be processed as follows: - a second table will be added having the postfix nd - Fontus sets all nd columns cells to true if the corresponding entry in the original column starts with a '<' symbol, e.g., <0.05. - Fontus strips < from the concentration values and replaces the value with its half. Fontus will convert <0.05 to 0.025 in the example above. It also converts the columns from string to numeric to use the data in calculations and graphical representations. Note that your data is not stored on the server. You will have to upload and configure your data for each new session. PHREEQC Mapping PHREEQC is a computer program that is designed to perform a wide range of aqueous geochemical calculations. Fontus uses PHREEQC to perform various calculations. In order go send hydrochemical data to the PHREEQC engine, parameter need to be mapped. Some parameter such as major ions, have already been assinged to system parameter in the previous section and their assignment can be reused for the linking of dataset parameters to the PHREEQC master species. All PHREEQC relevant parameters are defined in this section. Thermodynamic Database PHREEQC may be executed with various thermodynamic databases each one using a different selection of parameters and in some cases also different thermodynamic data for the same constituents. If you are not familiar with these databases, stick to the default database phreeqc.dat composed of a limited set of agreed upon data. Default Unit Unit that will be used in cases, where manual concentration input is required such for the Saturation Index Calculator . Master Species Verify, that every master species having an equivalent parameter in the dataset is mapped to this parameter.","title":"Data"},{"location":"data/data/#data","text":"","title":"Data"},{"location":"data/data/#introduction","text":"This menu allows users to view the demo dataset's metadata and upload and configure their own dataset. The configuration mainly consists of mapping fields of the dataset to system parameters used by Fontus for plotting or calculations. For example, to construct a piper diagram, Fontus needs to know which parameter represents the calcium, magnesium, sodium concentrations, etc. This section also includes the settings for PHREEQC, the geochemical modeling engine used for advanced calculations such as mineral saturation indices. Users must map each PHREEQC model input parameter to the corresponding field in the uploaded dataset. The radio buttons at the top of the form allow the user to select the built-in demo dataset or to upload a dataset. No further actions are required if the mode is set to demo dataset. However, you might browse the data in the data grid or inspect the data and fields.","title":"Introduction"},{"location":"data/data/#upload","text":"The Datasource radio-button allows the user to upload a file. Once the Upload Dataset option is selected, various import options and an upload field become available. Field Description Separator character character separating 2 fields Encoding file encoding Skip rows Number of rows containing header information that must be skipped. The column names row must not be skipped Has ND Values If this checkbox is activated, the program detects columns storing non detect values and extract the respective numerical values. Columns including non detects must also be mapped to the numerica data type Upload csv File Drag the file from your local disk to this field to upload the file","title":"Upload"},{"location":"data/data/#preview","text":"The Preview Data File section shows the uploaded data. Use the Download data as CSV button below this table to download the file. Typically, this is not useful since the table corresponds to the user's uploaded file. However, downloading the file may be helpful if the user wishes to download the demo dataset so he can reuse the file as a template for formatting data.","title":"Preview"},{"location":"data/data/#fields","text":"For many analyses, Fontus needs to be aware of specific parameters such as temperature, pH, calcium, magnesium, etc. Therefore the user must map all column names of the imported file to the corresponding system parameters. The easiest way to achieve this goal is to use the naming convention for your fields, as shown below. Using these names in your column names allows Fontus to map most parameters automatically. If you prefer to keep your data file as is, it is still possible to map columns to system parameters, as explained in the section below. Parameter Description Ca Calcium concentration in mg/L Mg Magnesium concentration in mg/L Na Sodium concentration in mg/L K Potassium in mg/L is not mandatory, but if present, it will be added to the sodium ternary endpoint in the Piper diagram Cl Chloride concentration in mg/L SO4 Sulfate concentration in mg/L HCO3 or Alk Bicarbonate concentration in mg/L or alternatively alkalinity in mg/L CaCO3 (CO3) Carbonate concentration in mg/L is not mandatory, but if found, it will be added to the bicarbonate ternary endpoint. pH Measured pH value temp measured water temperature longitude Geographic longitude latitude Geographic latitude sample_date Sampling data, must be in the format YYYY-MM-DD or YYYY-MM-DD mm:hh stationid unique identifier for the sampling location The Fields section shows all fields found in the uploaded data and the default settings that the system determines after the import. The user may map columns to the respective system parameter where applicable. If parameter names match the ones mentioned in the list above, Fontus generates the mapping automatically. Column : The column is the name found in the imported file; it cannot be changed unless the user updates the column name in the file and uploads it again. Column names must be unique and should not include spaces, brackets hyphens or any special characters. Label : Label used in the plots and tooltips. For concentrations, the label usually holds a name of the constituent, for example Calcium. Parameter Group : Assigning the parameter group to each field allows Fontus to generate an appropriate parameter options list to select from in various program sections. The following values are available: - station: a station parameter, typically elevation and coordinates. - sample: metadata pertaining to the sampling event such as sample date, sample number - observation: measured values such as concentrations, temperature, pH, etc. System Field: Columns may be mapped to system parameters, so the application understands the meaning of the data in this column. The available system fields are listed in the table above. Note that if you use these as column names in the uploaded file, the system will automatically detect and map the parameters. If you use a different column name, for example, \"total calcium\" instead of \"ca,\" you need to map your parameter manually. for system parameters, Fontus suggests a unit, which may be overwritten, if your dataset uses a different unit. Data Type: Data type for this column: str, float, int, and date. Fontus will assign all String parameters as group-by-parameters. Unit For parameters with data type float, a unit may be defined. For fields which have been mapped to a system parameter having an associated formula weight and valence, the unit is selected from a predfined selection list. These fields can be presented as different units in the program in the analysis. For all non mapped numeric parameters, the unit is a free-text field and the unit cannot be changed during analysis. Group-by-parameters are included in the GUI and can be used for filtering, plot legends, and plot grouping. If you want to suppress a column showing up as a filter field, set the respective parameter to \"not mapped.\" the group by field type proves most advantageous for categorical values that can be used for filtering or as legends in plots. Lookup Code For string parameters, Fontus shows a checkbox where the user may indicate whether the field's data is considered to be categorical. Categorical data consists of codes with a limited number of distinct values. Typical examples include geology, country, and county. Fields flagged as lookup lists can later be used as legends for plots and filters in plots and numerical analysis. By default, Fontus sets all string parameters as lookup codes. If a column of type string should not be used as a filter or as a plot legend, uncheck the checkbox. The Generate Time Aggregation Columns only appear if a parameter is mapped as the sample_date parameter. If this is the case, you may add one or multiple time aggregation columns: Year , Month , Season . These fields can later be used for filtering or as the legend in a Piper plot. The application uses a simplified algorithm where December to February is assigned to Winter, March to May to spring, June to August to summer, and September to November to fall. Note that for determining the season based on the sampling date, you should define the hemisphere of the project area. For the Southern hemisphere, Fontus will assign the seasons as follows: December to February: summer; March to May: fall, June to August: winter; and September to November: fall. Refrain from using this option if your uploaded data already includes the year, month, or season columns. Hemisphere : To calculate the season expression from the sample date, users must select the hemisphere of the project location must. If the dataset includes coordinates, Fontus determines the hemisphere automatically, and the parameter becomes read-only. Apply button : Pressing the apply button will generate the time columns and activate any parameter mapping changes. If the user enabled the Has ND (non detects) values options in the header section of this form, columns containing non-detect values such as <0.05 will be processed as follows: - a second table will be added having the postfix nd - Fontus sets all nd columns cells to true if the corresponding entry in the original column starts with a '<' symbol, e.g., <0.05. - Fontus strips < from the concentration values and replaces the value with its half. Fontus will convert <0.05 to 0.025 in the example above. It also converts the columns from string to numeric to use the data in calculations and graphical representations. Note that your data is not stored on the server. You will have to upload and configure your data for each new session.","title":"Fields"},{"location":"data/data/#phreeqc-mapping","text":"PHREEQC is a computer program that is designed to perform a wide range of aqueous geochemical calculations. Fontus uses PHREEQC to perform various calculations. In order go send hydrochemical data to the PHREEQC engine, parameter need to be mapped. Some parameter such as major ions, have already been assinged to system parameter in the previous section and their assignment can be reused for the linking of dataset parameters to the PHREEQC master species. All PHREEQC relevant parameters are defined in this section. Thermodynamic Database PHREEQC may be executed with various thermodynamic databases each one using a different selection of parameters and in some cases also different thermodynamic data for the same constituents. If you are not familiar with these databases, stick to the default database phreeqc.dat composed of a limited set of agreed upon data. Default Unit Unit that will be used in cases, where manual concentration input is required such for the Saturation Index Calculator . Master Species Verify, that every master species having an equivalent parameter in the dataset is mapped to this parameter.","title":"PHREEQC Mapping"},{"location":"plots/map/","text":"Map plot Maps require that both the longitude and the latitude columns are present and mapped to the respective system parameters. Both parameters must be stored as decimal degrees values. Fontus can plot symbols from categorical data columns. Categorical parameters are variables that can take on a limited number of values, each representing a particular category. For example, settings the Group Legend by to a column 'geology' holding the values 'bedrock' and 'overburden' will display bedrock-wells and overburden-wells with different symbols. Continuous values can be plotted as proportional size or proportional color symbols using the Proportional Marker Size or Color section in the Plot Settings . Plot Settings This tab allows overwriting the automatically generated plot settings for the map diagram. The form includes the following sections: General plot settings Markers Tooltips Legend Proportinal Marker Size or Color Plot Properties In the plot properties sections, you may define the following parameters: Plot Title: Allows setting a title for the plot. If no title is required, the fields can be left empty. For grouped plots, the user may include the group-legend-by -parameter-name in curly braces. For each plot, this expression will be replaced by the code for which the plot uses the data. | Plot Title Font Size: Size of title font in em. Plot Title Alignment: Define whether the title should be left-, center- or right-aligned. Group plots by: If your data contains strings or integer values with a limited number of distinct values, you may group the plots by such a field (e.g., station, geology, year, etc.). One plot will be created for each distinct value in the selected data column. Group Legend by: Define the field that would be used to appear in the legend with distinct markers. For example, if you select the station column in the demo dataset, each station will be represented with a distinct marker. Plot Width: Width of plot in points. Show Grid: Show or hide the grid lines. Grid lines can be hidden if the target diagram is small. | Show Tick Labels: Show or hide the tick labels. Tick labels may be hidden if the target diagram is small. Tick Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Axis Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Image Output Format Select png for a bitmap format and SVG for a vectorized output. The SVG format is scaleable but is not as widely supported as the png format. Note that plot by and legend by grouping can be used in combination, but different fields should be applied to each grouping. When using the same group field, each plot will contain only one marker. Marker Properties Markers are defined by the basic properties of type (circle, square, triangle, etc.), color, and size. Marker Size: size of the marker in points. All markers have the same size. Marker Color Palette: : Colors are assigned to markers through color palettes containing a list of colors. Fontus uses the palettes of the Bokeh graphic library, used to render the Piper diagram. After selecting a palette, the selected palette is previewed below the selectbox. Number of Colors: : Most palettes include 11 or more colors. If marker colors are generated by cycling through the palette, fewer colors may be more convenient. The field Number of Colors can be used to limit the number of colors used from the defined palette. Default Color: If the user does not select a Group Legend By option, all data points are rendered using the same marker. Fontus uses the first marker type for the used symbol and the Default Color for the color of the default marker. Marker Generator Algorithm: : When selecting the Group Legend By option, markers are generated automatically by alternating the symbol and colors of each marker. The user may choose between three generators: - Cycle through marker types (circle, square, etc.) first using the first color of the palette. When the last symbol type is reached, use the next color and restart from the first marker type. - Cycle through color type using the first marker type of the marker-type list. When the last color is reached, use the next marker type and restart from the first color. - Cycle through color and marker types simultaneously. The number of marker types and colors should be equal. Make sure, for this mode that there are no more codes to be represented than there are combinations of color and markers, as otherwise, there would be identical markers for different codes. Tooltips When hovering over points on the plot, a tooltip will show information about the selected point. In this section, the user can define which fields to display in the tooltip box. Fontus selects by default the stationid (if available) and all fields, marked as lookup parameters as the tooltip. Legend The legend section allows the user to specify all properties related to the legend on the plot. Legend Location: : Location where legend will show on the plot. Border Line Width: : Width of borderline around the legend. Border-Line Color: : Color of the borderline around the legend. Border-Line Opacity: : Opacity of the border line: 0 = transparent, 1 = opaque. Background Fill Color: : Background color of the box holding the legend. Background Fill Opacity: : Opacity of the box holding the legend text. Proportional Marker Size or Color Fontus allows users to render the size or the color of markers proportionally to the value of a numeric parameter. The examples below show the parameter total hardness. Proportional color example for parameter total hardness and color palette reds256: Parameter: Parameter used for marker size or color calculation. Minimum Value: All values for the selected parameter equal or smaller than the minimum value will either be displayed with the minimum radius or the first color in the selected color palette. Maximum Value: All values for the selected parameter equal or greater than the maximum value will either be displayed with the maximum radius or the first color in the selected color palette. Method: Marker size method draws symbol size proportinal to a parameter, the marker color method adjusts the marker fill color proportional to a parameter. Some input parameters vary as a function of the selected method: Proportinal Size method: Minimum Size: : Marker size for the values equal or smaller than the minimum value in points. Maximum Size: : Marker size for the values equal or greater than the maximum value. Proportinal Color method: Color Palette: : Select one of the available 256-colors-palettes. Fontus will fill markers for samples with values equal to or smaller than the minimum value with the first color in this palette. Colors equal to or greater than the maximum value with take the last color. The proportional color index between 1 and 256 will be calculated for values between the minimum and the maximum value.","title":"Maps"},{"location":"plots/map/#map-plot","text":"Maps require that both the longitude and the latitude columns are present and mapped to the respective system parameters. Both parameters must be stored as decimal degrees values. Fontus can plot symbols from categorical data columns. Categorical parameters are variables that can take on a limited number of values, each representing a particular category. For example, settings the Group Legend by to a column 'geology' holding the values 'bedrock' and 'overburden' will display bedrock-wells and overburden-wells with different symbols. Continuous values can be plotted as proportional size or proportional color symbols using the Proportional Marker Size or Color section in the Plot Settings .","title":"Map plot"},{"location":"plots/map/#plot-settings","text":"This tab allows overwriting the automatically generated plot settings for the map diagram. The form includes the following sections: General plot settings Markers Tooltips Legend Proportinal Marker Size or Color","title":"Plot Settings"},{"location":"plots/map/#plot-properties","text":"In the plot properties sections, you may define the following parameters: Plot Title: Allows setting a title for the plot. If no title is required, the fields can be left empty. For grouped plots, the user may include the group-legend-by -parameter-name in curly braces. For each plot, this expression will be replaced by the code for which the plot uses the data. | Plot Title Font Size: Size of title font in em. Plot Title Alignment: Define whether the title should be left-, center- or right-aligned. Group plots by: If your data contains strings or integer values with a limited number of distinct values, you may group the plots by such a field (e.g., station, geology, year, etc.). One plot will be created for each distinct value in the selected data column. Group Legend by: Define the field that would be used to appear in the legend with distinct markers. For example, if you select the station column in the demo dataset, each station will be represented with a distinct marker. Plot Width: Width of plot in points. Show Grid: Show or hide the grid lines. Grid lines can be hidden if the target diagram is small. | Show Tick Labels: Show or hide the tick labels. Tick labels may be hidden if the target diagram is small. Tick Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Axis Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Image Output Format Select png for a bitmap format and SVG for a vectorized output. The SVG format is scaleable but is not as widely supported as the png format. Note that plot by and legend by grouping can be used in combination, but different fields should be applied to each grouping. When using the same group field, each plot will contain only one marker.","title":"Plot Properties"},{"location":"plots/map/#marker-properties","text":"Markers are defined by the basic properties of type (circle, square, triangle, etc.), color, and size. Marker Size: size of the marker in points. All markers have the same size. Marker Color Palette: : Colors are assigned to markers through color palettes containing a list of colors. Fontus uses the palettes of the Bokeh graphic library, used to render the Piper diagram. After selecting a palette, the selected palette is previewed below the selectbox. Number of Colors: : Most palettes include 11 or more colors. If marker colors are generated by cycling through the palette, fewer colors may be more convenient. The field Number of Colors can be used to limit the number of colors used from the defined palette. Default Color: If the user does not select a Group Legend By option, all data points are rendered using the same marker. Fontus uses the first marker type for the used symbol and the Default Color for the color of the default marker. Marker Generator Algorithm: : When selecting the Group Legend By option, markers are generated automatically by alternating the symbol and colors of each marker. The user may choose between three generators: - Cycle through marker types (circle, square, etc.) first using the first color of the palette. When the last symbol type is reached, use the next color and restart from the first marker type. - Cycle through color type using the first marker type of the marker-type list. When the last color is reached, use the next marker type and restart from the first color. - Cycle through color and marker types simultaneously. The number of marker types and colors should be equal. Make sure, for this mode that there are no more codes to be represented than there are combinations of color and markers, as otherwise, there would be identical markers for different codes.","title":"Marker Properties"},{"location":"plots/map/#tooltips","text":"When hovering over points on the plot, a tooltip will show information about the selected point. In this section, the user can define which fields to display in the tooltip box. Fontus selects by default the stationid (if available) and all fields, marked as lookup parameters as the tooltip.","title":"Tooltips"},{"location":"plots/map/#legend","text":"The legend section allows the user to specify all properties related to the legend on the plot. Legend Location: : Location where legend will show on the plot. Border Line Width: : Width of borderline around the legend. Border-Line Color: : Color of the borderline around the legend. Border-Line Opacity: : Opacity of the border line: 0 = transparent, 1 = opaque. Background Fill Color: : Background color of the box holding the legend. Background Fill Opacity: : Opacity of the box holding the legend text.","title":"Legend"},{"location":"plots/map/#proportional-marker-size-or-color","text":"Fontus allows users to render the size or the color of markers proportionally to the value of a numeric parameter. The examples below show the parameter total hardness. Proportional color example for parameter total hardness and color palette reds256: Parameter: Parameter used for marker size or color calculation. Minimum Value: All values for the selected parameter equal or smaller than the minimum value will either be displayed with the minimum radius or the first color in the selected color palette. Maximum Value: All values for the selected parameter equal or greater than the maximum value will either be displayed with the maximum radius or the first color in the selected color palette. Method: Marker size method draws symbol size proportinal to a parameter, the marker color method adjusts the marker fill color proportional to a parameter. Some input parameters vary as a function of the selected method: Proportinal Size method: Minimum Size: : Marker size for the values equal or smaller than the minimum value in points. Maximum Size: : Marker size for the values equal or greater than the maximum value. Proportinal Color method: Color Palette: : Select one of the available 256-colors-palettes. Fontus will fill markers for samples with values equal to or smaller than the minimum value with the first color in this palette. Colors equal to or greater than the maximum value with take the last color. The proportional color index between 1 and 256 will be calculated for values between the minimum and the maximum value.","title":"Proportional Marker Size or Color"},{"location":"plots/piper/","text":"Piper Diagram The piper diagram is a popular representation of the major ion composition. It consists of two trilinear plots for the major cations (left) and anions (right) and a diamond shaped projection area between the two triangles. Required Parameters The Piper plot requires that the cations calcium, magnesium, sodium, anions chloride, sulfate, and alkalinity or bicarbonate are available in the dataset and correctly mapped in the fields section of the Data tab. Plot Settings This tab allows overwriting the automatically generated plot settings for the map diagram. The form is divided into the following sections: Plot settings Markers Tooltips Legend Proportional Marker Size or Color Plot Properties In the plot properties sections, you may define the following parameters: Plot Title: Allows setting a title for the plot. If no title is required, the field can be left empty. For grouped plots, the user may include the group-legend-by -parameter-name in curly braces. For each plot, this expression will be replaced by the code for which the plot uses the data. Plot Title Font Size: Size of title font in em (1em = 2in). Plot Title Alignment: Define whether the title should be left-, center- or right-aligned. Group plots by: If your data contains strings or integer values with a limited number of distinct values, you may group the plots by such a field (e.g., station, geology, year, etc.). One plot will be created for each distinct value in the selected data column. Group Legend by: Define the field that would be used to appear in the legend with distinct markers. For example, if you select the station column in the demo dataset, each station will be represented with a distinct marker. Plot Width: Width of plot in points. Show Grid: Show or hide the grid lines. Grid lines can be hidden if the target diagram is small. | Show Tick Labels: Show or hide the tick labels. Tick labels may be hidden if the target diagram is small. Tick Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Axis Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Image Output Format Select png for a bitmap format and SVG for a vectorized output. The SVG format is scaleable but is not as widely supported as the png format. Note that plot by and legend by grouping can be used in combination, but different fields should be applied to each grouping. When using the same group field, each plot will contain only one marker. Marker Properties Markers are defined by the basic properties of type (circle, square, triangle, etc.), color, and size. Marker Size: size of the marker in points. All markers have the same size. Marker Color Palette: : Colors are assigned to markers through color palettes containing a list of colors. Fontus uses the palettes of the Bokeh graphic library, used to render the Piper diagram. After selecting a palette, the selected palette is previewed below the selectbox. Number of Colors: : Most palettes include 11 or more colors. If marker colors are generated by cycling through the palette, fewer colors may be more convenient. The field Number of Colors can be used to limit the number of colors used from the defined palette. Default Color: If the user does not select a Group Legend By option, all data points are rendered using the same marker. Fontus uses the first marker type for the used symbol and the Default Color for the color of the default marker. Marker Generator Algorithm: : When selecting the Group Legend By option, markers are generated automatically by alternating the symbol and/or colors of each marker. The user may choose between three generators: - Cycle through marker types (circle, square, etc.) first using the first color of the palette. When the last symbol type is reached, use the next color and restart from the first marker type. - Cycle through color type first using the first marker type of the marker-type list. When the last color is reached, use the next marker type and restart from the first color. - Cycle through color and marker types simultaneously. The number of marker types and colors should be equal. Make sure, for this mode, that there are no more codes to be represented than color/marker types available, as otherwise, there will be identical markers for different codes. Tooltips When hovering over points on the plot, a tooltip will show information about the selected point. In this section, the user can define which fields to display in the tooltip box. For major ions, the user can specify whether values should be listed as mg/L (original concentration from the data file), meq/L, or meq%. Values expressed in meq% are smaller than mg/L-concentrations. Therefore the user may also specify the number of digits used for major ions concentrations. Legend The legend properties allow to specify the Legend appearing on the Piper plot: Legend Location: : Location where legend will show on the plot. Border Line Width: : Width of borderline around the legend. Border-Line Color: : Color of the borderline around the legend. Border-Line Opacity: : Opacity of the border line: 0 = transparent, 1 = opaque. Background Fill Color: : Background color of the box holding the legend. Background Fill Opacity: : Opacity of the box holding the legend text. Proportional Marker Size or Color The marker of the diamond shaped projection area may be specified to be proportional in size or color in respect to a specified numeric parameter. Often Total dissolved solids (TDS) or electrical conductivy (Cond) are used for this purpose, to compensate for the dimension of total concentrations, lost in the trilinear representation. Examples for each method are shown below. Parameter: : Parameter used for marker size or color calculation. Minimum Value: : All values for the selected parameter equal or smaller than the minimum value will either be displayed with the minimum radius or the first color in the selected color palette. Maximum Value: : All values for the selected parameter equal or greater than the maximum value will either be displayed with the maximum radius or the first color in the selected color palette. Method: : Marker size method generates symbol sizes proportional to the value of the specified parameter. The marker color method adjusts the marker fill color proportional to the the value of the specified parameter. Some input parameters vary as a function of the selected method: Proportional Size method: Minimum Size: : Marker size for the values equal or smaller than the minimum value Maximum Size: : Marker size for the values equal or greater than the maximum value. Proportional Color method: Color Palette: : Select on of the available 256-colors-palettes. Values equal or smaller thatn the minimum value will filled with the first color in this palette, colors equal or greater than the maximum value with take the last color and for values between the minimum and maximum value a color index between 1 and 256 will be calculated.","title":"Piper"},{"location":"plots/piper/#piper-diagram","text":"The piper diagram is a popular representation of the major ion composition. It consists of two trilinear plots for the major cations (left) and anions (right) and a diamond shaped projection area between the two triangles.","title":"Piper Diagram"},{"location":"plots/piper/#required-parameters","text":"The Piper plot requires that the cations calcium, magnesium, sodium, anions chloride, sulfate, and alkalinity or bicarbonate are available in the dataset and correctly mapped in the fields section of the Data tab.","title":"Required Parameters"},{"location":"plots/piper/#plot-settings","text":"This tab allows overwriting the automatically generated plot settings for the map diagram. The form is divided into the following sections: Plot settings Markers Tooltips Legend Proportional Marker Size or Color","title":"Plot Settings"},{"location":"plots/piper/#plot-properties","text":"In the plot properties sections, you may define the following parameters: Plot Title: Allows setting a title for the plot. If no title is required, the field can be left empty. For grouped plots, the user may include the group-legend-by -parameter-name in curly braces. For each plot, this expression will be replaced by the code for which the plot uses the data. Plot Title Font Size: Size of title font in em (1em = 2in). Plot Title Alignment: Define whether the title should be left-, center- or right-aligned. Group plots by: If your data contains strings or integer values with a limited number of distinct values, you may group the plots by such a field (e.g., station, geology, year, etc.). One plot will be created for each distinct value in the selected data column. Group Legend by: Define the field that would be used to appear in the legend with distinct markers. For example, if you select the station column in the demo dataset, each station will be represented with a distinct marker. Plot Width: Width of plot in points. Show Grid: Show or hide the grid lines. Grid lines can be hidden if the target diagram is small. | Show Tick Labels: Show or hide the tick labels. Tick labels may be hidden if the target diagram is small. Tick Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Axis Label Font Size: Select a larger font in points if the diagram needs to be scaled down. Image Output Format Select png for a bitmap format and SVG for a vectorized output. The SVG format is scaleable but is not as widely supported as the png format. Note that plot by and legend by grouping can be used in combination, but different fields should be applied to each grouping. When using the same group field, each plot will contain only one marker.","title":"Plot Properties"},{"location":"plots/piper/#marker-properties","text":"Markers are defined by the basic properties of type (circle, square, triangle, etc.), color, and size. Marker Size: size of the marker in points. All markers have the same size. Marker Color Palette: : Colors are assigned to markers through color palettes containing a list of colors. Fontus uses the palettes of the Bokeh graphic library, used to render the Piper diagram. After selecting a palette, the selected palette is previewed below the selectbox. Number of Colors: : Most palettes include 11 or more colors. If marker colors are generated by cycling through the palette, fewer colors may be more convenient. The field Number of Colors can be used to limit the number of colors used from the defined palette. Default Color: If the user does not select a Group Legend By option, all data points are rendered using the same marker. Fontus uses the first marker type for the used symbol and the Default Color for the color of the default marker. Marker Generator Algorithm: : When selecting the Group Legend By option, markers are generated automatically by alternating the symbol and/or colors of each marker. The user may choose between three generators: - Cycle through marker types (circle, square, etc.) first using the first color of the palette. When the last symbol type is reached, use the next color and restart from the first marker type. - Cycle through color type first using the first marker type of the marker-type list. When the last color is reached, use the next marker type and restart from the first color. - Cycle through color and marker types simultaneously. The number of marker types and colors should be equal. Make sure, for this mode, that there are no more codes to be represented than color/marker types available, as otherwise, there will be identical markers for different codes.","title":"Marker Properties"},{"location":"plots/piper/#tooltips","text":"When hovering over points on the plot, a tooltip will show information about the selected point. In this section, the user can define which fields to display in the tooltip box. For major ions, the user can specify whether values should be listed as mg/L (original concentration from the data file), meq/L, or meq%. Values expressed in meq% are smaller than mg/L-concentrations. Therefore the user may also specify the number of digits used for major ions concentrations.","title":"Tooltips"},{"location":"plots/piper/#legend","text":"The legend properties allow to specify the Legend appearing on the Piper plot: Legend Location: : Location where legend will show on the plot. Border Line Width: : Width of borderline around the legend. Border-Line Color: : Color of the borderline around the legend. Border-Line Opacity: : Opacity of the border line: 0 = transparent, 1 = opaque. Background Fill Color: : Background color of the box holding the legend. Background Fill Opacity: : Opacity of the box holding the legend text.","title":"Legend"},{"location":"plots/piper/#proportional-marker-size-or-color","text":"The marker of the diamond shaped projection area may be specified to be proportional in size or color in respect to a specified numeric parameter. Often Total dissolved solids (TDS) or electrical conductivy (Cond) are used for this purpose, to compensate for the dimension of total concentrations, lost in the trilinear representation. Examples for each method are shown below. Parameter: : Parameter used for marker size or color calculation. Minimum Value: : All values for the selected parameter equal or smaller than the minimum value will either be displayed with the minimum radius or the first color in the selected color palette. Maximum Value: : All values for the selected parameter equal or greater than the maximum value will either be displayed with the maximum radius or the first color in the selected color palette. Method: : Marker size method generates symbol sizes proportional to the value of the specified parameter. The marker color method adjusts the marker fill color proportional to the the value of the specified parameter. Some input parameters vary as a function of the selected method: Proportional Size method: Minimum Size: : Marker size for the values equal or smaller than the minimum value Maximum Size: : Marker size for the values equal or greater than the maximum value. Proportional Color method: Color Palette: : Select on of the available 256-colors-palettes. Values equal or smaller thatn the minimum value will filled with the first color in this palette, colors equal or greater than the maximum value with take the last color and for values between the minimum and maximum value a color index between 1 and 256 will be calculated.","title":"Proportional Marker Size or Color"},{"location":"plots/plots_intro/","text":"Introduction Fontus currently allows to create Piper diagrams and maps. The plot type is selected in the sidebar menu. However, these plots type only appear in the plots selection list if the uploaded data contains the required fields and these fields have been correctly mapped to the respective system parameters. Note that each plot output window consists of a tabbed widget consisting of the tabs Plot Settings and Show Plot . Plot settings allow you to specify all plot properties, and Show Plot holds the generated graphic. For most plots, filters can be set on fields specified as lookup parameters in the Data menu. Common Features Toolbar The following icons appear on the right side of most plots and allow the user to interact with the figures. Most plots are created using the python graphic libary Bokeh . This icon links to the Bokeh home page. This icon allows the user to pan. If panning is active a blue bar appears on the left of the icon. The box zoom allows to zoom into a box within the plot. If box zoom is active, a blue bar appears on the left of the icon. Zooming can be very helpful to identify points in a plot having closely clustered or overlapping markers. The wheel zoom icon allows the user to zoom in and out in the plot, using the mouse wheel. If wheel zoom is active, a blue bar appears on the left of the icon. This icons resets the original settings and undoes any previous zooming and panning. Provides Bokeh help. Activates the display of a tooltip info box when hovering over a point. If tooltip display is active, a blue bar appears on the left of the icon. Sidebar Options The sidebar menu allows to change the plot type using the topmost selectbox widget but also holds two additional sections alowing the user to interact with the plot. \ud83d\udd0eFilter: In this box, all fields marked as lookup fields appear as multi-selectboxes. If the user select one or several items from one of the selectboxes, the data is filtered to only include samples, matching this filter. \u2699\ufe0fSettings: The sidebar settings include additional settings, which Fontus makes more easily available as they are commonly and often changed during an analysis and because it is helpful to be able to inspect the result instantly, without switching between the Settings and Show Plot tabs. The Group Legend by option defines the parameter for which each distinct value will be shown with a different symbol on the plot. The list of available parameters includes all parameters marked as lookup fields. Suppose the user selects a function from the Aggregation Function list box. In that case, all samples belonging to the same legend symbol (having the same value for the parameter selected in the Group Legend by list) will be aggregated to a single symbol in the plot. This feature allows summarizing data when there are too many points to show on a single plot. For maps, aggregation is mandatory since all samples from the same station perfectly overlap, so showing multiple symbols per station does not add value to the plot and results in confusing tooltip boxes. Save Images If the user selects this option, all plots are saved to a file ready for download at the same time that they render on the screen. When active, a download button is shown allowing to download these files. Show Data: When this option is active, the data used to generate the current plot is shown in a collapsable box below the plot. Hiding the box can be advantageous for keeping the output area uncluttered if the analyst down not require the data in a grid format and also saves time when generating the output. When active, Fontus renders the data table in a collapsable box, and the user may use the icon to open or close the box. Below the grid holding the plot data, a download button allows downloading the data.","title":"Introduction"},{"location":"plots/plots_intro/#introduction","text":"Fontus currently allows to create Piper diagrams and maps. The plot type is selected in the sidebar menu. However, these plots type only appear in the plots selection list if the uploaded data contains the required fields and these fields have been correctly mapped to the respective system parameters. Note that each plot output window consists of a tabbed widget consisting of the tabs Plot Settings and Show Plot . Plot settings allow you to specify all plot properties, and Show Plot holds the generated graphic. For most plots, filters can be set on fields specified as lookup parameters in the Data menu.","title":"Introduction"},{"location":"plots/plots_intro/#common-features","text":"","title":"Common Features"},{"location":"plots/plots_intro/#toolbar","text":"The following icons appear on the right side of most plots and allow the user to interact with the figures. Most plots are created using the python graphic libary Bokeh . This icon links to the Bokeh home page. This icon allows the user to pan. If panning is active a blue bar appears on the left of the icon. The box zoom allows to zoom into a box within the plot. If box zoom is active, a blue bar appears on the left of the icon. Zooming can be very helpful to identify points in a plot having closely clustered or overlapping markers. The wheel zoom icon allows the user to zoom in and out in the plot, using the mouse wheel. If wheel zoom is active, a blue bar appears on the left of the icon. This icons resets the original settings and undoes any previous zooming and panning. Provides Bokeh help. Activates the display of a tooltip info box when hovering over a point. If tooltip display is active, a blue bar appears on the left of the icon.","title":"Toolbar"},{"location":"plots/plots_intro/#sidebar-options","text":"The sidebar menu allows to change the plot type using the topmost selectbox widget but also holds two additional sections alowing the user to interact with the plot. \ud83d\udd0eFilter: In this box, all fields marked as lookup fields appear as multi-selectboxes. If the user select one or several items from one of the selectboxes, the data is filtered to only include samples, matching this filter. \u2699\ufe0fSettings: The sidebar settings include additional settings, which Fontus makes more easily available as they are commonly and often changed during an analysis and because it is helpful to be able to inspect the result instantly, without switching between the Settings and Show Plot tabs. The Group Legend by option defines the parameter for which each distinct value will be shown with a different symbol on the plot. The list of available parameters includes all parameters marked as lookup fields. Suppose the user selects a function from the Aggregation Function list box. In that case, all samples belonging to the same legend symbol (having the same value for the parameter selected in the Group Legend by list) will be aggregated to a single symbol in the plot. This feature allows summarizing data when there are too many points to show on a single plot. For maps, aggregation is mandatory since all samples from the same station perfectly overlap, so showing multiple symbols per station does not add value to the plot and results in confusing tooltip boxes. Save Images If the user selects this option, all plots are saved to a file ready for download at the same time that they render on the screen. When active, a download button is shown allowing to download these files. Show Data: When this option is active, the data used to generate the current plot is shown in a collapsable box below the plot. Hiding the box can be advantageous for keeping the output area uncluttered if the analyst down not require the data in a grid format and also saves time when generating the output. When active, Fontus renders the data table in a collapsable box, and the user may use the icon to open or close the box. Below the grid holding the plot data, a download button allows downloading the data.","title":"Sidebar Options"}]}